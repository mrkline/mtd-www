<PAGE>
	<VAR match="VAR_ORIGIN" replace="../" />
	<VAR match="VAR_CVSID" replace="$Id$"/>
	<INCLUDE file="../inc/header.tmpl" />

	<VAR match="VAR_SEL_DOC" replace="selected" />
	<VAR match="VAR_SEL_GIT" replace="selected" />
	<PARSE file="../menu1.xml" />

	<INCLUDE file="../inc/content.tmpl" />

	<H2>MTD GIT HOWTO</H2>

<P>The MTD GIT tree is at <TT>git://git.infradead.org/mtd-2.6.git</TT>,
and is visible through <A
HREF="http://git.infradead.org/?p=mtd-2.6.git">gitweb</A>. Other git
trees are available and can be browsed through the gitweb interface 
at <A HREF="http://git.infradead.org/">http://git.infradead.org/</A>.
</P>

<P>Users with accounts on git.infradead.org (aka pentafluge.infradead.org)
can create their own git trees which are publicly accessible. A cron
job runs every five minutes, indexing the available trees in users' 
<TT>~/public_git/</TT> directories and making them available in
gitweb.</P>
<P>When creating GIT trees with patches you intend to be pushed upstream,
please try to ensure that we end up with as few merges as possible.
Anything you commit should be on top of the latest mtd-2.6 git tree,
rather than against a clean tree from Linus. Avoid doing any merges of
your own, unless absolutely necessary.</P>

<P>Please try to avoid cloning directly from git.infradead.org --
you'll be downloading many thousands of objects which are already
present in the official upstream source tree. Save your disk space and
our network bandwidth by using 'alternates' instead. This is what the
'<TT>--reference</TT>' command in the examples below is for. It means
that you keep only one copy of all the git objects which exist in
the 'reference' or 'alternate' tree, rather than duplicating them.</P>

<P>There are two suggested methods of working with your own local tree
  -- the first is the simple method which uses a git tree with just
  one 'master' branch, while the other deals with multiple branches in
  the same directory.</P>

<hr size="2" />

<H3>General GIT reference documentation</H3>

<UL>
<LI><A HREF="http://www.kernel.org/pub/software/scm/git/docs/tutorial.html">Tutorial introduction to git</A></LI>
<LI><A HREF="http://www.kernel.org/pub/software/scm/git/docs/everyday.html">Everyday GIT with 20 commands or so</A></LI>
<LI><A HREF="http://www.kernel.org/pub/software/scm/git/docs/cvs-migration.html">GIT for CVS users</A></LI>
</UL>


<hr size="2" />

<H3>Creating your own tree on git.infradead.org</H3>

Creating your own tree is simple. You create a <TT>public_git</TT>
directory within your home directory, and ensure that it is world-readable:
<PRE>
$ ssh pentafluge.infradead.org
$ mkdir ~/public_git
$ chmod og+rx ~ ~/public_git
</PRE>

Once you've done that, you can create trees in your <TT>public_git</TT>
directory by cloning from the existing trees which are in <TT>/home/git</TT>
(or indeed from other users' trees):

<PRE>
$ cd ~/public_git
$ git clone -l -n -s --bare /home/git/mtd-2.6.git foo-2.6.git
</PRE>

<P>Your new tree will be immediately accessible to the public through the
URL <TT>git://git.infradead.org/~&lt;I&gt;user&lt;/I&gt;/foo-2.6.git</TT>.
</P>
<P>Within five minutes of its creation, your tree should be visible 
through the <A HREF="http://git.infradead.org/">gitweb</A> interface
  too.</P>
<P>You can then make a local clone of your public tree, make commits
  to it and push them back using the URL
<TT>ssh://git.infradead.org/home/user/public_git/foo-2.6.git</TT>.</P>

<P>Note, when working with <TT>git://</TT> URLs, ~ (tilde) may be used
   to specify home directory, but you should use full path in case of
   <TT>ssh://</TT> URLs (i.e., <TT>/home/user</TT>).</P>

<hr size="2" />

<H3>Working with your MTD GIT tree (requires git 1.3.0 or newer)</H3>

<H4>Clone Linus' tree</H4>
If you don't already have a copy of Linus' tree locally, get one:
<PRE>$ git clone git://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6.git linux-2.6</PRE>

<H4>Clone MTD tree</H4>
Using Linus' tree as a reference for existing objects, clone the MTD
  tree:
<PRE>$ git clone --reference linux-2.6 git://git.infradead.org/mtd-2.6.git mtd-2.6</PRE>

<H4>Clone your own tree</H4>
Again uUsing Linus' tree as a reference for existing objects, clone your
own tree from your <TT>public_git</TT> directory:
<PRE>$ git clone --reference linux-2.6 ssh://git.infradead.org/home/user/public_git/foo-2.6.git myfoo-2.6</PRE>

<P><I>(Note that you <b>must</b> specify the linux-2.6 tree as a
  reference rather than the mtd-2.6 tree if you cloned them as shown
  above, because git 'alternates' are not transitive -- it wouldn't
  find objects in the linux-2.6 tree if you were to refer it to the
  mtd-2.6 tree, and it would break.)</I>
</P>
Having cloned your tree, you can now commit to it using git-commit
and push the results back with git-push.

<INCLUDE file="../inc/footer.tmpl" />
</PAGE>
